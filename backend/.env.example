# ============================================================================
# PDF Summary & Mindmap Application - Backend Environment Configuration
# ============================================================================
#
# This file documents all required environment variables for the backend.
# Copy to .env and fill in your actual values before running the application.
#
# SECURITY NOTE: Never commit .env with real credentials. Use this .env.example
# as a template and keep .env in .gitignore
#
# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server host and port
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# Environment mode: development, staging, production
ENV=development

# Enable debug mode (set to false in production)
DEBUG=true

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string (required)
# Format: postgresql://username:password@host:port/database_name
# Example: postgresql://postgres:password@localhost:5432/ebook_summary
DATABASE_URL=postgresql://postgres:password@localhost:5432/ebook_summary

# Database pool settings
DB_POOL_SIZE=20
DB_POOL_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# Enable SQL logging (for debugging, disable in production)
DB_ECHO=false

# ============================================================================
# GEMINI API CONFIGURATION
# ============================================================================

# Google Generative AI API Key (required)
# Get from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Gemini model to use for summaries and mindmaps
GEMINI_MODEL=gemini-1.5-flash

# API rate limiting: requests per minute
GEMINI_RATE_LIMIT_PER_MINUTE=60

# Request timeout for Gemini API calls (seconds)
GEMINI_REQUEST_TIMEOUT=30

# Mindmap generation timeout (seconds) - usually faster than summary
GEMINI_MINDMAP_TIMEOUT=20

# Temperature for summary generation (0.0 = deterministic, 1.0 = creative)
GEMINI_SUMMARY_TEMPERATURE=0.3

# Temperature for mindmap generation
GEMINI_MINDMAP_TEMPERATURE=0.2

# Maximum retries for failed Gemini API calls (with exponential backoff)
GEMINI_MAX_RETRIES=3

# Initial retry delay in seconds (grows exponentially)
GEMINI_RETRY_DELAY=1

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================

# Maximum file size for uploads (in bytes, default: 100MB)
MAX_UPLOAD_SIZE_BYTES=104857600

# Directory to store uploaded PDF files
UPLOAD_DIR=./uploads

# Directory for temporary files during processing
TEMP_DIR=./temp

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================

# LRU cache maximum size in MB (for summaries and mindmaps)
CACHE_MAX_SIZE_MB=1000

# Cache TTL in seconds (0 = no TTL, cache until restart)
CACHE_TTL_SECONDS=0

# Optional: Enable Redis caching for distributed deployments
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# DOCUMENT RETENTION CONFIGURATION
# ============================================================================

# Document expiration period (days) - documents auto-delete after this period
DOCUMENT_RETENTION_DAYS=30

# Run cleanup job daily (time in HH:MM format, UTC)
CLEANUP_JOB_TIME=02:00

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json for production, text for development
LOG_FORMAT=json

# Application name for logs
APP_NAME=ebook_summary

# ============================================================================
# CORS & SECURITY CONFIGURATION
# ============================================================================

# Frontend origin(s) for CORS - comma-separated for multiple origins
# Example: http://localhost:3000,https://app.example.com
CORS_ORIGINS=http://localhost:3000

# Allow credentials in CORS requests
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# MONITORING & METRICS CONFIGURATION
# ============================================================================

# Enable Prometheus metrics endpoint
METRICS_ENABLED=true

# Prometheus metrics port
METRICS_PORT=8001

# Track cost of Gemini API calls
COST_TRACKING_ENABLED=true

# Cost alert threshold (weekly spend in USD) - alert if exceeded
COST_ALERT_THRESHOLD_USD=100

# ============================================================================
# OPTIONAL: USER MANAGEMENT
# ============================================================================

# For MVP, typically single-user; set to disable multi-user features
MULTI_USER_ENABLED=false

# Default user for single-user mode (if MULTI_USER_ENABLED=false)
DEFAULT_USER_EMAIL=user@example.com
DEFAULT_USER_NAME=Default User

# ============================================================================
# OPTIONAL: DEVELOPMENT & TESTING
# ============================================================================

# Enable dummy/mock mode for local testing without Gemini API
MOCK_GEMINI=false

# Seed database with sample data on startup (development only)
SEED_DATABASE=false

# ============================================================================
# OPTIONAL: EMAIL NOTIFICATIONS (Future Use)
# ============================================================================

# SMTP server for email notifications
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM_EMAIL=noreply@example.com

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
